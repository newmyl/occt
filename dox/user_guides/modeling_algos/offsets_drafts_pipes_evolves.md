Offsets, Drafts, Pipes and Evolved Shapes {#user_guides__modeling_algos_offsets_drafts_pipes_evolves}
=========================================

@tableofcontents

These classes provide the following services:

  * Creation of offset shapes and their variants such as: 
    * Hollowing; 
    * Shelling; 
    * Lofting; 
  * Creation of tapered shapes using draft angles;
  * Creation of sweeps.
  
@section occt_modalg_7_1 Shelling 

Shelling is used to offset given faces of a solid by a specific value. It rounds or intersects adjacent faces along its edges depending on the convexity of the edge. 

The constructor *BRepOffsetAPI_MakeThickSolid* shelling operator takes the solid, the list of faces to remove and an offset value as input.

~~~~~
TopoDS_Solid SolidInitial = ...;

Standard_Real 			Of 		= ...;
TopTools_ListOfShape 	LCF;
TopoDS_Shape 			Result;
Standard_Real 			Tol = Precision::Confusion();

for (Standard_Integer i = 1 ;i <= n; i++) {
	TopoDS_Face SF = ...; // a face from SolidInitial
	LCF.Append(SF);
}

Result = BRepOffsetAPI_MakeThickSolid 	(SolidInitial,
										LCF,
										Of,
										Tol);
~~~~~

@image html /user_guides/modeling_algos/images/modeling_algos_image042.png	"Shelling"
@image latex /user_guides/modeling_algos/images/modeling_algos_image042.png	"Shelling"

@section occt_modalg_7_2  Draft Angle

*BRepOffsetAPI_DraftAngle* class allows modifying a shape by applying draft angles to its planar, cylindrical and conical faces. 


The class is created or  initialized from a shape, then faces to be modified are added; for each face,  three arguments are used: 
  * Direction: the direction with  which the draft angle is measured
  * Angle: value of the angle
  * Neutral plane: intersection  between the face and the neutral plane is invariant.

The following code  places a draft angle on several faces of a shape; the same direction, angle and  neutral plane are used for each face: 

~~~~~
TopoDS_Shape myShape = ... 
// The original shape 
TopTools_ListOfShape ListOfFace; 
// Creation of the list of faces to be modified 
... 

gp_Dir Direc(0.,0.,1.); 
// Z direction 
Standard_Real Angle = 5.*PI/180.; 
// 5 degree angle 
gp_Pln Neutral(gp_Pnt(0.,0.,5.), Direc); 
// Neutral plane Z=5 
BRepOffsetAPI_DraftAngle theDraft(myShape); 
TopTools_ListIteratorOfListOfShape itl; 
for (itl.Initialize(ListOfFace); itl.More(); itl.Next())  { 
	theDraft.Add(TopoDS::Face(itl.Value()),Direc,Angle,Neutral); 
	if  (!theDraft.AddDone()) { 
		// An error has occurred. The faulty face is given by //  ProblematicShape 
		break; 
		} 
} 
if (!theDraft.AddDone()) { 
	// An error has  occurred 
	TopoDS_Face guilty =  theDraft.ProblematicShape(); 
	... 
} 
theDraft.Build(); 
if (!theDraft.IsDone()) { 
	// Problem  encountered during reconstruction 
	... 
} 
else { 
	TopoDS_Shape  myResult = theDraft.Shape(); 
	... 
} 
~~~~~

@image html /user_guides/modeling_algos/images/modeling_algos_image043.png  "DraftAngle"
@image latex /user_guides/modeling_algos/images/modeling_algos_image043.png  "DraftAngle"

@section occt_modalg_7_3 Pipe Constructor

*BRepOffsetAPI_MakePipe* class allows creating a pipe from a Spine,  which is a Wire and a Profile which is a Shape. This implementation is limited  to spines with smooth transitions, sharp transitions are precessed by  *BRepOffsetAPI_MakePipeShell*. To be more precise the continuity must be G1,  which means that the tangent must have the same direction, though not necessarily the same magnitude, at neighboring edges. 

The angle between the spine and the profile is preserved throughout the pipe. 

~~~~~
TopoDS_Wire Spine = ...; 
TopoDS_Shape Profile = ...; 
TopoDS_Shape Pipe =  BRepOffsetAPI_MakePipe(Spine,Profile); 
~~~~~

@image html /user_guides/modeling_algos/images/modeling_algos_image044.png "Example of a Pipe"
@image latex /user_guides/modeling_algos/images/modeling_algos_image044.png "Example of a Pipe"

@section occt_modalg_7_4 Evolved Solid

*BRepOffsetAPI_MakeEvolved* class allows creating an evolved solid from a Spine (planar face or wire) and a profile (wire). 

The evolved solid is an unlooped sweep generated by the spine and the profile. 

The evolved solid is  created by sweeping the profileâ€™s reference axes on the spine. The origin of  the axes moves to the spine, the X axis and the local tangent coincide and the  Z axis is normal to the face. 

The reference axes of  the profile can be defined following two distinct modes: 

* The reference axes of the  profile are the origin axes. 
* The references axes of  the profile are calculated as follows: 
  + the origin is given by the  point on the spine which is the closest to the profile
  + the X axis is given by the  tangent to the spine at the point defined above
  + the Z axis is the normal to  the plane which contains the spine.

~~~~~
TopoDS_Face Spine = ...; 
TopoDS_Wire Profile = ...; 
TopoDS_Shape Evol = 
BRepOffsetAPI_MakeEvolved(Spine,Profile); 
~~~~~

